---
layout: post
title: "【DOS】DOS命令大全02"
date: 2013-10-09 23:17
categories: 【DOS】
tags:
- DOS命令02
---
**批处理高级教程精选合编**  
    本教程适合对dos有一定基础的人慢慢学习或查阅。  
    查阅方法：复制目录中的条目，搜索即可。  
    
---

## 第一章 批处理基础  
### 第一节 常用批处理内部命令简介  
批处理定义：顾名思义，批处理文件是将一系列命令按一定的顺序集合为一个可执行的文本文件，其扩展名为BAT或者CMD。这些命令统称批处理命令。  
小知识：可以在键盘上按下`Ctrl+C组合键来强行终止一个批处理的执行过程。`  
了解了大概意思后,我们正式开始学习.先看一个简单的例子!  

```
@echo off
echo "Hallo Word!"
pause
```

把上面的3条命令保存为文件`test.bat`或者`test.cmd`然后执行,  
他就会在屏幕上显示以下二行话:  
> Hallo Word!!
> 请按任意键继续. . .

　　这就是一个简单批处理文件了，这个批处理文件一共就用了2条命令"echo" 和"pause"还有一个特殊符号"@"  
从上面这个简单的批处理中,我们可以发现其实批处理就是运用一些含有特殊意义的符号和一些完成指定功能的命令组合而成,那么在批处理中  
　　有多少这样的特殊符号和功能命令呢？我们现在就来仔细了解一下一些最常用的!  
(以下内容来源网络,请各位仔细阅读,好进入下节的实例说明)  

---

**介绍命令**  
#### 1、REM 和 ::  
REM为注释命令，一般用来给程序加上注解，该命令后的内容不被执行，但能回显。  
其次, :: 也可以起到rem 的注释作用, 而且更简洁有效; 但有两点需要注意：  

　　第一, 任何以冒号:开头的字符行, 在批处理中都被视作标号, 而直接忽略其后的所有内容。  
有效标号：冒号后紧跟一个以字母数字开头的字符串，goto语句可以识别。  
无效标号：冒号后紧跟一个非字母数字的一个特殊符号，goto无法识别的标号，可以起到注释作用，所以 :: 常被用作注释符号，其实 :+ 也可起注释作用。  
　　第二, 与rem 不同的是, ::后的字符行在执行时不会回显, 无论是否用echo on打开命令行回显状态, 因为命令解释器不认为他是一个有效的命令行, 就此点来看, rem在某些场合下将比 :: 更为适用; 另外, rem 可以用于 config.sys 文件中。  

#### 2、ECHO 和 @  
打开回显或关闭回显功能，或显示消息。如果没有任何参数，echo命令将显示当前回显设置。  
@字符放在命令前将关闭该命令回显，无论此时echo是否为打开状态。  
语法:  

```
echo [{ on|off }] [message]
echo.   #此用法将显示一空行，相当于回车，非常有用。
```

执行`echo off`将关闭回显，它后面的所有命令都不显示命令本身，只显示执行后的结果，除非执行`echo on`命令。  
执行`@echo off`不但关闭以后命令的回显，连`echo off`命令本身也不显示了。  
通常以`@echo off`作为批处理程序的首行。  
一般用`ECHO MESSAGE`来显示一个特定的消息。  
例：  

```
@Echo off
Echo hello
Pause
运行显示：hello
```

#### 3、"PAUSE"  
`PAUSE`，玩游戏的人都知道，暂停的意思  
在这里就是停止系统命令的执行并显示下面的内容。  

例：  

```
PAUSE
运行显示：
请按任意键继续. . .
```

要显示其他提示语，可以这样用：  
`Echo 其他提示语 & pause > nul`  

#### 4、errorlevel  
程序返回码  
`echo %errorlevel%`  
每个命令运行结束，可以用这个命令行格式查看返回码  
用于判断刚才的命令是否执行成功  
默认值为0，一般命令执行出错会设 errorlevel 为1  

#### 5、title  
设置cmd窗口的标题`title 新标题`\#可以看到cmd窗口的标题栏变了  

#### 6、COLOR  
设置默认的控制台前景和背景颜色。  
COLOR [attr]  
  attr        指定控制台输出的颜色属性  
颜色属性由两个十六进制数字指定 -- 第一个为背景，第二个则为前景。每个数字可以为以下任何值之一:  

> 0 = 黑色       8 = 灰色  
> 1 = 蓝色       9 = 淡蓝色  
> 2 = 绿色       A = 淡绿色  
> 3 = 湖蓝色     B = 淡浅绿色  
> 4 = 红色       C = 淡红色  
> 5 = 紫色       D = 淡紫色  
> 6 = 黄色       E = 淡黄色  
> 7 = 白色       F = 亮白色  

如果没有给定任何参数，该命令会将颜色还原到CMD.EXE启动时的颜色。这个值来自当前控制台窗口、/T 开关或DefaultColor注册表值。  
如果用相同的前景和背景颜色来执行 COLOR 命令，COLOR 命令会将 ERRORLEVEL 设置为 1。  
例如: "COLOR fc" 在亮白色上产生亮红色  

#### 7、mode 配置系统设备  
配置系统设备。  

```
串行口:　　　　　　MODE COMm[:] [BAUD=b] [PARITY=p] [DATA=d] [STOP=s]
　　　　　　　　　　　　　　　　　　[to=on|off] [xon=on|off] [odsr=on|off]
　　　　　　　　　　　　　　　　　　[octs=on|off] [dtr=on|off|hs]
　　　　　　　　　　　　　　　　　　[rts=on|off|hs|tg] [idsr=on|off]
设备状态:　　　　　MODE [device] [/STATUS]
打印重定向:　　　　MODE LPTn[:]=COMm[:]
选定代码页:　　　　MODE CON[:] CP SELECT=yyy
代码页状态:　　　　MODE CON[:] CP [/STATUS]
显示模式:　　　　　MODE CON[:] [COLS=c] [LINES=n]
击键率:　　　　　　MODE CON[:] [RATE=r DELAY=d]
```

#### 8、"GOTO" 和 :  
`GOTO`会点编程的朋友就会知道这是跳转的意思。  
在批处理中允许以`“:XXX”来构建一个标号，然后用GOTO XXX跳转到标号:XXX处，`然后执行标号后的命令。  
例：  

```
if {%1}=={} goto noparms
if "%2"=="" goto noparms
```